<div id="<%= dom_id @profile %>" class="card bg-main">

  <%= form_with model: @profile, method: :patch, class: "flex flex-col gap " do |f| %>

    <% if @profile.errors.any? %>
      <div class="border-dark rounded bg-shade text-negative p-6">
        <% @profile.errors.each do |error| %>
          <div>
            <%= error.full_message %>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="flex flex-col gap">
      <div class="flex flex-col gap-half">
        <%= f.label :username %>
        <%= f.text_field :username, class: "input bg-shade border-dark" %>
      </div>
      <div class="flex flex-col gap-half">
        <%= f.label :display_name %>
        <%= f.text_field :display_name, class: "input bg-shade border-dark" %>
      </div>
      <div class="flex flex-col gap-half">
        <%= f.label :avatar %>
        <%= f.file_field :avatar, class: "input bg-shade border-dark" %>
      </div>
      <div class="flex flex-col gap-half">
        Current Avatar
        <%= image_tag(avatar_url(@profile.user), alt: "Avatar for #{@profile.display_name}", size: "200" ) %>
      </div>
    </div>

    <div id="edit-profile-form-actions" class="flex gap justify-end">
      <div>
        <%= f.submit "Update Profile", class: "btn btn--positive" %>
      </div>
      <div>
        <%= link_to "Discard changes", profile_path, class: "btn btn--negative" %>
      </div>
    </div>
  <% end %>

</div>
